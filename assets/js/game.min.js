function loadJSON(e,n,a){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(200===t.status?n&&n(JSON.parse(t.responseText)):a&&a(t))},t.open("GET",e,!0),t.send()}function hasLocalStorage(){var e="testingLS";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return console.log("Sorry, your browser does not support Web Storage..."),!1}}var HangappData={style:"day",wins:0,losses:0,words:[],definitions:[]};function saveData(){hasLocalStorage()&&localStorage.setItem("HangappData",JSON.stringify(HangappData))}function loadData(){if(null!==localStorage.getItem("HangappData")){var e=localStorage.getItem("HangappData");HangappData=JSON.parse(e),Hangman.wins=HangappData.wins,Hangman.losses=HangappData.losses}}var Hangman={wins:0,losses:0,guesses:10,difficulty:"Easy",inProgress:!1,answer:"",guessedWord:[],guessedLetters:[],def:"",cacheDef:"",isDayTheme:function(){return"day"==HangappData.style},getNumberOfGuesses:function(){return"Easy"==this.difficulty?10:"Medium"==this.difficulty?7:4},toggleDifficultyCheck:function(){Hangman.inProgress?confirm("Changing difficulty in the middle of game will restart. Are you sure?")&&(Hangman.toggleDifficulty(),Hangman.beginGame()):Hangman.toggleDifficulty()},toggleDifficulty:function(){highlightEffect("difficulty",!Hangman.isDayTheme(),500),"Easy"==this.difficulty?this.difficulty="Medium":"Medium"==this.difficulty?this.difficulty="Hard":this.difficulty="Easy",Hangman.guesses=Hangman.getNumberOfGuesses(),document.getElementById("difficulty").innerHTML="Difficulty: "+this.difficulty,Hangman.drawFrame()},chooseDifficulty:function(e){Hangman.inProgress?confirm("Changing difficulty in the middle of game will restart. Are you sure?")&&(this.difficulty=e,Hangman.guesses=Hangman.getNumberOfGuesses(),document.getElementById("difficulty").innerHTML="Difficulty: "+this.difficulty,Hangman.drawFrame(),Hangman.beginGame()):(this.difficulty=e,Hangman.guesses=Hangman.getNumberOfGuesses(),document.getElementById("difficulty").innerHTML="Difficulty: "+this.difficulty,Hangman.drawFrame())},drawFrame:function(){var e=10;for(svgAnimator(e);e>=Hangman.guesses;)svgAnimator(e),e--},emptyCache:function(){hasLocalStorage()&&(confirm("This will clear your score and all saved words and definitions. Are you sure?")&&(localStorage.removeItem("HangappData"),Hangman.wins=0,Hangman.losses=0,HangappData.wins=0,HangappData.losses=0,HangappData.words=[],HangappData.definitions=[]),document.getElementById("nav-cached-words").innerHTML="Cached Words: "+HangappData.words.length,Hangman.printScore())},cacheWords:function(){if(navigator.onLine&&HangappData.words.length<50){var e=Word_List.getRandomWord();Hangman.getDef(e,!0),setTimeout(function(){""!=Hangman.cacheDef&&(HangappData.words.push(e),HangappData.definitions.push(Hangman.cacheDef),highlightEffect("nav-cached-words",!Hangman.isDayTheme(),200),saveData(),document.getElementById("nav-cached-words").innerHTML="Cached Words: "+HangappData.words.length)},500)}},guessedWordStr:function(){return Hangman.guessedWord.toString().replace(/,/g,"")},chooseWord:function(){if(""==HangappData.words){Hangman.answer=Word_List.getRandomWord();for(var e=0;e<Hangman.answer.length;e++)Hangman.guessedWord[e]=" "}else Hangman.answer=HangappData.words[0],Hangman.def=HangappData.definitions[0],HangappData.words.splice(0,1),HangappData.definitions.splice(0,1),saveData()},placeBlanks:function(){document.getElementById("word").innerHTML="";for(var e=0;e<Hangman.answer.length;e++){var n=document.createElement("SPAN");n.setAttribute("id","answer-"+e);var a=document.createTextNode("_");n.appendChild(a),document.getElementById("word").appendChild(n)}},getDef:function(e,n){navigator.onLine?loadJSON("https://dictionaryapi.com/api/v3/references/collegiate/json/"+e+"?key=cb690753-1eb8-4661-a7f4-9adf25057760",function(e){try{var a=e[0].fl,t=e[0].shortdef[0];t.length>250&&(t=t.substring(0,250),t+="..."),n?Hangman.cacheDef=a+": "+t:Hangman.def=a+": "+t}catch(e){n?Hangman.cacheDef="":Hangman.def=""}},function(e){Hangman.def="Error"}):(Hangman.cacheDef="",Hangman.def="User offline. Reconnect to get definitions.")},isGuessedLetter:function(e){for(var n=0;n<Hangman.guessedLetters.length;n++)if(e==Hangman.guessedLetters[n])return!0;return!1},guess:function(e){Hangman.inProgress=!0;try{var n=this.innerHTML.toLowerCase()}catch(a){n=e}var a=0;if(!Hangman.isGuessedLetter(n)){Hangman.guessedLetters.push(n);for(var t=0;t<Hangman.answer.length;t++)n===Hangman.answer[t]?(document.getElementById("answer-"+t).innerHTML=n,Hangman.guessedWord[t]=n):a++,document.getElementById("guess-"+n).style.display="none";a==Hangman.answer.length&&(Hangman.guesses--,svgAnimator(Hangman.guesses)),Hangman.answer==Hangman.guessedWordStr()&&Hangman.guesses>0?Hangman.win():0==Hangman.guesses&&Hangman.lose()}},win:function(){document.getElementById("win-lose").innerHTML="You win! The word was <span>"+Hangman.answer+"</span>!",Hangman.wins++,Hangman.endGame()},lose:function(){document.getElementById("win-lose").innerHTML="You lose! The word was <span>"+Hangman.answer+"</span>!",Hangman.losses++,Hangman.endGame()},endGame:function(){Hangman.inProgress=!1,HangappData.wins=Hangman.wins,HangappData.losses=Hangman.losses,saveData(),document.getElementById("definition").innerHTML=Hangman.def,Hangman.printScore(),fadeOutEffect("game-screen"),fadeInEffect("end-screen"),document.getElementById("end-screen").style.display="inline",document.getElementById("new-game").children[0].disabled=!1},printScore:function(){document.getElementById("score-wins").innerHTML="Wins: "+Hangman.wins,document.getElementById("score-losses").innerHTML="Losses: "+Hangman.losses,document.getElementById("nav-wins").innerHTML="Wins: "+Hangman.wins,document.getElementById("nav-losses").innerHTML="Losses: "+Hangman.losses},showGuessedLetters:function(){for(var e=document.getElementById("guessed-letters").children,n=0;n<e.length;n++)e[n].style.display="inline"},beginGame:function(){Hangman.inProgress=!1,fadeOutEffect("end-screen"),fadeInEffect("game-screen"),Hangman.def="",Hangman.printScore(),Hangman.chooseWord(),Hangman.getDef(Hangman.answer,!1),Hangman.guesses=Hangman.getNumberOfGuesses(),Hangman.drawFrame(),Hangman.placeBlanks(),Hangman.showGuessedLetters(),Hangman.guessedWord=[],Hangman.guessedLetters=[],document.getElementById("new-game").children[0].disabled=!0,document.getElementById("citation").setAttribute("href","https://www.merriam-webster.com/dictionary/"+Hangman.answer+"/")},init:function(){Nav.init(),loadData(),setStyle(HangappData.style),Hangman.attachEventHandlers(),Hangman.beginGame()},attachEventHandlers:function(){document.addEventListener("keydown",function(e){if(e.key.match(/^[a-z]/))Hangman.guess(e.key),Nav.close();else if("Enter"==e.key||"N"==e.key){if(Hangman.inProgress)confirm("Pressing enter starts a new game. Do you wish to continue?")&&Hangman.beginGame();else Hangman.beginGame()}else"D"==e.key?setStyle("night"):"L"==e.key?setStyle("day"):"E"==e.key?Hangman.chooseDifficulty("Easy"):"M"==e.key?Hangman.chooseDifficulty("Medium"):"H"==e.key&&Hangman.chooseDifficulty("Hard")});var e=document.getElementById("main"),n=document.getElementById("openbtn");e.addEventListener("click",function(){Nav.close()},!1),n.addEventListener("click",function(e){Nav.toggle(),e.stopPropagation()},!1);for(var a=document.getElementById("guessed-letters"),t=0;t<a.childElementCount;t++){var s=a.children[t],i=s.innerHTML.toLowerCase();s.setAttribute("id","guess-"+i),s.onclick=Hangman.guess}}};function svgAnimator(e){if(10==e)for(var n=0;n<10;n++){var a=(t=document.querySelector("#svg_"+n)).getTotalLength();t.style.transition=t.style.WebkitTransition="none",t.style.strokeDasharray=a+" "+a,t.style.strokeDashoffset="0",t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset 2s ease-in-out",t.style.strokeDashoffset=a}else{var t;a=(t=document.querySelector("#svg_"+e)).getTotalLength();t.style.transition=t.style.WebkitTransition="none",t.style.strokeDasharray=a+" "+a,t.style.strokeDashoffset=a,t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset 2s ease-in-out",t.style.strokeDashoffset="0"}}function toggleTheme(){Hangman.isDayTheme()?setStyle("night"):setStyle("day")}function setStyle(e){highlightEffect("theme",Hangman.isDayTheme(),500),document.getElementById("day-night-stylesheet").setAttribute("href","assets/css/"+e+".css");var n=e.charAt(0).toUpperCase()+e.substr(1);document.getElementById("theme").innerHTML="Theme: "+n,HangappData.style=e,saveData()}var Nav={start:0,end:250,isOpening:!1,isClosing:!1,effect:"",init:function(){document.getElementById("mySidebar").style.width="0px"},open:function(){var e=document.getElementById("mySidebar"),n=parseInt(e.style.width);Nav.isOpening=!0,Nav.isClosing=!1,Nav.effect=setInterval(function(){n<Nav.end?(n+=3,e.style.width=n+"px"):(clearInterval(Nav.effect),e.style.width=Nav.end+"px",Nav.isOpening=!1)},2)},close:function(){var e=document.getElementById("mySidebar"),n=parseInt(e.style.width);Nav.isOpening=!1,Nav.isClosing=!0,Nav.effect=setInterval(function(){n>Nav.start?(n-=3,e.style.width=n+"px"):(clearInterval(Nav.effect),e.style.width=Nav.start+"px",Nav.isClosing=!1)},2)},toggle:function(){var e=document.getElementById("mySidebar");Nav.isOpening?(clearInterval(Nav.effect),Nav.close()):Nav.isClosing?(clearInterval(Nav.effect),Nav.open()):parseInt(e.style.width)==Nav.start?Nav.open():Nav.close()}};function fadeOutEffect(e){document.getElementById(e).style.opacity=0,document.getElementById(e).style.display="none"}function fadeInEffect(e){document.getElementById(e).style.display="inline";var n=document.getElementById(e),a=0;n.style.opacity=a;var t=setInterval(function(){a<.9?(a+=.1,n.style.opacity=a.toFixed(1)):clearInterval(t)},50)}function highlightEffect(e,n,a){var t=document.getElementById(e);n?(t.style.color="white",setTimeout(function(){t.style.color="#818181"},a)):(t.style.color="black",setTimeout(function(){t.style.color="#7E7E7E"},a))}setInterval(Hangman.cacheWords,1e3),window.onload=Hangman.init;
